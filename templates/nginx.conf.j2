user  {{ nginx_user }};

error_log  {{ nginx_error_log }};
pid        {{ nginx_pidfile }};

worker_processes  {{ nginx_worker_processes }};

events {
    worker_connections  {{ nginx_worker_connections }};
    multi_accept {{ nginx_multi_accept }};
}

http {
    include       {{ nginx_mime_file_path }};
    default_type  application/octet-stream;

    server_names_hash_bucket_size {{ nginx_server_names_hash_bucket_size }};

    client_max_body_size {{ nginx_client_max_body_size }};

    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';

    access_log      {{ nginx_access_log }};

    sendfile        {{ nginx_sendfile }};
    # tcp_nopush      {{ nginx_tcp_nopush }};
    # tcp_nodelay     {{ nginx_tcp_nodelay }};

    keepalive_timeout  {{ nginx_keepalive_timeout }};
    # keepalive_requests {{ nginx_keepalive_requests }};

    #gzip  on;
{#
    include {{ nginx_conf_path }}/*.conf;

{% if nginx_conf_path != nginx_vhost_path %}
    include {{ nginx_vhost_path }}/*;
{% endif %}
#}

    server {
        listen       80;
        server_name  localhost;
        #charset koi8-r;
        # location / {
        #     rewrite      ^ https://$host$request_uri? permanent;
        # }

        location / {
            root   /usr/share/nginx/html;
            index  index.html index.htm;
        }

        error_page  404              /404.html;

        # redirect server error pages to the static page /50x.html
        #
        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }
    }

{#
    # HTTPS server
    #
    # server {
    #     listen       443 ssl;
    #     server_name  {{ nginx_jhub.name }};

    #     # ssl on;
    #     ssl_certificate      {{ ssl_cert_path }};
    #     ssl_certificate_key  {{ ssl_key_path }};

    #     ssl_session_cache    shared:SSL:1m;
    #     ssl_session_timeout  5m;

    #     # ssl_ciphers  HIGH:!aNULL:!MD5;
    #     # ssl_prefer_server_ciphers  on;

    #     ssl_ciphers "AES128+EECDH:AES128+EDH";
    #     ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
    #     ssl_prefer_server_ciphers on;
    #     # add_header Strict-Transport-Security "max-age=63072000; includeSubDomains";
    #     # add_header X-Content-Type-Options nosniff;
    #     ssl_stapling on; # Requires nginx >= 1.3.7
    #     ssl_stapling_verify on; # Requires nginx => 1.3.7
    #     resolver_timeout 5m;

    #     location / {
    #         root   {{ nginx_root }};
    #         index  index.html index.htm;
    #     }

    # }
#}

}
